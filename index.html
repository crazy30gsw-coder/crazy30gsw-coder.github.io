<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>まとめ速報｜芸能・政治・話題ニュース</title>
  <meta name="description" content="芸能ニュースを中心に、政治・話題の最新情報をまとめて速報表示します。" />
  <meta name="theme-color" content="#ff7a00" />

  <!-- ✅ Google AdSense（審査用コード） -->
  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3300575674917758"
     crossorigin="anonymous"></script>

  <style>
    body{
      margin:0;
      font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Noto Sans JP",sans-serif;
      background:#f5f5f5;
      color:#111;
    }
    header{
      background:linear-gradient(135deg,#ff7a00,#ff9f1a);
      color:#fff;
      padding:16px;
    }
    h1{
      margin:0;
      font-size:22px;
      font-weight:900;
    }
    .sub{
      font-size:13px;
      opacity:.9;
      margin-top:4px;
    }
    .wrap{
      max-width:980px;
      margin:0 auto;
      padding:12px;
    }
    .filters{
      display:flex;
      gap:8px;
      margin:12px 0;
      flex-wrap:wrap;
    }
    .filter{
      background:#fff;
      border-radius:999px;
      padding:8px 14px;
      font-size:13px;
      font-weight:700;
      border:1px solid #ddd;
      cursor:pointer;
    }
    .filter.active{
      background:#111;
      color:#fff;
      border-color:#111;
    }
    .search{
      width:100%;
      padding:10px 12px;
      border-radius:12px;
      border:1px solid #ddd;
      margin-bottom:12px;
      font-size:14px;
    }
    .card{
      background:#fff;
      border-radius:14px;
      padding:12px;
      margin-bottom:12px;
      box-shadow:0 4px 12px rgba(0,0,0,.06);
    }
    .time{
      font-size:12px;
      color:#ff7a00;
      font-weight:800;
    }
    .title{
      font-size:16px;
      font-weight:900;
      margin:6px 0;
    }
    .title a{
      color:#0b57d0;
      text-decoration:none;
    }
    .title a:hover{
      text-decoration:underline;
    }
    .meta{
      font-size:12px;
      color:#666;
      display:flex;
      gap:8px;
      flex-wrap:wrap;
      align-items:center;
    }
    .tag{
      background:#fff2e6;
      border:1px solid #ffd1a3;
      color:#a64b00;
      border-radius:999px;
      padding:4px 10px;
      font-weight:800;
    }
    footer{
      font-size:12px;
      color:#666;
      padding:20px 12px;
      max-width:980px;
      margin:0 auto;
      line-height:1.6;
    }
  </style>
</head>

<body>

<header>
  <h1>まとめ速報</h1>
  <div class="sub">RSSから自動更新｜芸能・政治・話題ニュース</div>
</header>

<div class="wrap">

  <input id="search" class="search" type="search" placeholder="検索（例：炎上、結婚、政治、選挙）">

  <div class="filters">
    <div class="filter active" data-cat="all">全部</div>
    <div class="filter" data-cat="ent">芸能</div>
    <div class="filter" data-cat="pol">政治</div>
    <div class="filter" data-cat="scandal">スキャンダル</div>
    <div class="filter" data-cat="other">その他</div>
  </div>

  <div id="list"></div>

</div>

<footer>
  ※ 当サイトはRSS等から取得した情報を整理して表示しています。  
  内容の詳細はリンク先の元記事をご確認ください。
</footer>

<script>
const POSTS_URL = "./posts.json";
let ALL = [];
let current = "all";

function categoryOf(p){
  const t = (p.title||"");
  if(t.match(/政治|首相|国会|選挙|政党/)) return "pol";
  if(t.match(/不倫|逮捕|炎上|騒動|暴露/)) return "scandal";
  if(t.match(/俳優|女優|芸能|ドラマ|映画|アイドル/)) return "ent";
  return "other";
}

function render(){
  const q = document.getElementById("search").value.toLowerCase();
  const list = document.getElementById("list");
  list.innerHTML = "";

  ALL.filter(p=>{
    if(current!=="all" && p.cat!==current) return false;
    if(q && !p.title.toLowerCase().includes(q)) return false;
    return true;
  }).forEach(p=>{
    const div = document.createElement("div");
    div.className="card";
    div.innerHTML = `
      <div class="time">${p.ago}</div>
      <div class="title">
        <a href="${p.url}" target="_blank" rel="noopener">${p.title}</a>
      </div>
      <div class="meta">
        <span class="tag">${p.label}</span>
        <span>${p.source}</span>
        <span>${p.date}</span>
      </div>
    `;
    list.appendChild(div);
  });
}

async function load(){
  const res = await fetch(POSTS_URL+"?v="+Date.now());
  const data = await res.json();

  ALL = data.map(p=>{
    const cat = categoryOf(p);
    return {
      title:p.title,
      url:p.url,
      source:p.source||"news",
      date:p.date,
      ago:p.ago||"",
      cat,
      label:{
        ent:"芸能",
        pol:"政治",
        scandal:"スキャンダル",
        other:"その他"
      }[cat]
    };
  });

  render();
}

document.getElementById("search").addEventListener("input",render);
document.querySelectorAll(".filter").forEach(f=>{
  f.onclick=()=>{
    document.querySelectorAll(".filter").forEach(x=>x.classList.remove("active"));
    f.classList.add("active");
    current=f.dataset.cat;
    render();
  };
});

load();
</script>

</body>
</html>